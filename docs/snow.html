<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<style>
	* {
		margin: 0;
		padding: 0;
		line-height: 0;
	}

	body {
		width: 100vw;
		height: 100vh;
		/* background-color: #333; */
		background: url('./33.webp') no-repeat center center / cover;
		display: flex;
		align-items: center;
		justify-content: center;
background-filter:blur(5px);
	}

	.carousel {
		position: relative;
		overflow: hidden;
	}

	.carousel-wraper {
		display: flex;
		width: fit-content;
		height: fit-content;
		max-height: 100%;
	}

	.carousel,
	.carousel-wraper,
	.carousel-item,
	.carousel-wraper .carousel-item img,
	.carousel-btns {
		width: 500px;
		height: 250px;
	}

	.carousel-btns {
		pointer-events: none;
		position: absolute;
		top: 0;
		left: 0;
	}

	.carousel-btns>div {
		pointer-events: initial;
	}

	.carousel-btns .btn-prev,
	.carousel-btns .btn-next {
		position: absolute;
		left: 0;
		top: 50%;
		width: 50px;
		height: 50px;
		background: #000;
		margin-top: -25px;
		cursor: pointer;
	}

	.carousel-btns .btn-next {
		left: auto;
		right: 0;
	}

	img {
		object-fit: cover;
	}
</style>

<body>
	<div class="carousel">
		<div class="carousel-wraper">
			<div class="carousel-item"><img src="./微信图片_20230203141925.jpg"></div>
			<div class="carousel-item"><img src="./79FC92A576D2B7F5CE9747FD3A303C02.jpg"></div>
			<div class="carousel-item"><img src="./ED4E6F0CC466752DB4349C1643F475D9.jpg"></div>
			<div class="carousel-item"><img src="./微信图片_20230203141925.jpg"></div>
		</div>
		<div class="carousel-btns">
			<div class="btn-prev"></div>
			<div class="btn-next"></div>
		</div>
	</div>
</body>
<script>
	function snow({
		container,
		num
	} = options) {
		const wrap = document.querySelector(container);
		if (wrap.length == 0) return;
		var canvas = document.createElement('canvas');
		canvas.width = wrap.offsetWidth;
		canvas.height = wrap.offsetHeight;
		wrap.innerHTML = '';
		wrap.appendChild(canvas);
		var ctx = canvas.getContext('2d');


		var arr = [];
		for (let i = 0; i < num; i++) {
			if (!arr[i]) arr[i] = {};
			arr[i].r = Math.random() * (5 * Math.max(1, canvas.width / 1920));
			arr[i].x = Math.random() * canvas.width - arr[i].r;
			arr[i].y = Math.random() * canvas.height - arr[i].r;
			arr[i].color = 'rgba(243,245,245,' + Math.max(0.3, arr[i].r / 5) + ')';
		}

		function draw() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			for (let i of arr) {
				i.x -= Math.max(0.5 - Math.random(), i.r / 8);
				i.y += Math.max(1 - Math.random(), i.r / 5);

				if (i.x < -i.r) {
					i.x = canvas.width + i.r;
				}

				if (i.y > canvas.height + i.r) {
					i.y = -i.r;
				}

				ctx.beginPath();
				ctx.fillStyle = i.color;
				ctx.moveTo(i.x, i.y);
				ctx.arc(i.x, i.y, i.r, 0, -360, true);
				ctx.shadowBlur = 3; //  设置模糊度
				ctx.shadowColor = i.color //  设置阴影颜色
				ctx.fill();
			}
		}

		! function animate() {
			window.requestAnimationFrame(animate);
			draw();
		}()
	}
	snow({
		container: 'body',
		num: 520
	})

	function carousel() {
		let curViewIndex = 1;
		let carouselWraper = document.querySelector('.carousel-wraper');
		let carouselItem = document.querySelector('.carousel-item');
		let prevBtn = document.querySelector('.btn-prev');
		let nextBtn = document.querySelector('.btn-next');
		carouselWraper.style.transform = 'translateX(' + (-carouselItem.offsetWidth * curViewIndex) + 'px)';

		function prev() {
			prevBtn.addEventListener('click', function () {
				if (curViewIndex < 1) {
					curViewIndex = document.querySelectorAll('.carousel-item').length - 1;
					carouselWraper.style.transform = 'translateX(' + (-carouselItem.offsetWidth * curViewIndex) +
						'px)';
					carouselWraper.style.transition = 'none';
					carouselWraper.offsetHeight; // 阻塞渲染
				};
				curViewIndex--;
				carouselWraper.style.transition = 'all .5s';
				carouselWraper.style.transform = 'translateX(' + (-carouselItem.offsetWidth * curViewIndex) +
					'px)';
			})
		}

		function next() {
			nextBtn.addEventListener('click', function () {
				if (curViewIndex > document.querySelectorAll('.carousel-item').length - 2) {
					curViewIndex = 0;
					carouselWraper.style.transform = 'translateX(' + (-carouselItem.offsetWidth * curViewIndex) +
						'px)';
					carouselWraper.style.transition = 'none';
					carouselWraper.offsetHeight; // 阻塞渲染
				};
				curViewIndex++;
				carouselWraper.style.transition = 'all .5s';
				carouselWraper.style.transform = 'translateX(' + (-carouselItem.offsetWidth * curViewIndex) +
					'px)';
			})
		}

		function init() {
			prev();
			next();
		}

		return {
			init
		}
	}

	var c = carousel();
	c.init();
</script>

</html>
